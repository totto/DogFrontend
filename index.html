<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Hundesøk</title>
		<link rel="icon" type="image/png" href="" />
		<link href="css/main.css" rel="stylesheet" type="text/css">
		<link href="css/classic.css" rel="stylesheet" type="text/css">
		<link href="css/classic.date.css" rel="stylesheet" type="text/css">
		<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.3/themes/base/jquery-ui.css" rel="stylesheet" type="text/css">
	</head>
	<body style="background-color: #E8E2C3;">

		<header>
			<h1>Hundesøk</h1>
			<input type="text" name="filter" id="filter" placeholder="Søk på navn, ID m.m." autofocus size="58"/>
			
			<div id="pagenavigation"></div>
		</header>

		<div id="tools">
			<input type="checkbox" id="menutrigger" style="display:none">
			<label for="menutrigger"><span>Menu</span></label>
			<ul>
				<li><button id="downloadCsvBtn">Last ned CSV</button></li>
				<li><a href="graph.html">RAS Dashboard</a></li>
			</ul>
		</div>

		<div id="searchoptions" class="searchboxes">

			<section id="searchfacets"></section>
			
			<div id="searchsummary"></div>

			<footer>
				<h2>Profil</h2>
				<form method="post" action="/sso/login?redirectURI=/MemberFrontend/dogs.html" id="loginform">
					<input type="submit" value="Log in" id="loginbutton" class="butt">
					<a href="/sso/logout?redirectURI=/MemberFrontend/dogs.html" onClick="auth.logout();" id="logoutbutton">Log out</a>
				</form>
				<br/>
				<img src="img/NKK-logo.png" alt="NKK Logo">
			</footer>
		</div>

		<div id="searchresults">
			<table>
				<thead>
					<tr>
						<th class="sortable sortasc" id="name">Hund</th>
						<th class="sortable" id="breed">Rase</th>
						<th class="sortable" id="gender">Kjønn</th>
						<th class="sortable" id="born">Født</th>
						<th class="sortable" id="registrationDate">Registrert</th>
						<th>Hundeid</th>
						<th class="sortable" id="postalCode">Postnr</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>

		<div id="detail" style="display:none;">
			<div id="detailmask"></div>
			<div id="detailcontent"></div>
		</div>

		<div id="mailform" style="display:none;">
			<button class="closeBtn">x</button>
			<h1>Send mail</h1>
		</div>

		<script id="tabletemplate" type="text/x-dot-template">
			<tr class="member" id="{{=it.counter}}">
				<td>{{=it.name}}</td>
				<td>{{=it.breed}}</td>
				<td><span>{{=it.gender}}<span></td>
				<td><span>{{?it.born}}{{=it.born}}{{??}}-{{?}}<span></td>
				<td><span>{{?it.registrationDate}}{{=it.registrationDate}}{{??}}-{{?}}<span></td>
				<td><span>{{~it.ids:id:i}}{{=id}}<br/>{{~}}</span></td>
				<td><span>{{?it.postalCode}}{{=it.postalCode}}{{??}}-{{?}}</span></td>
			</tr>
		</script> 
		<script id="detailtemplate" type="text/x-dot-template">
			<button class="closeBtn">x</button>
			<h1>{{=it.name}}</h1>
			<dl>
				<dt>Rase</dt>
				<dd>{{=it.breed}}</dd>
				<dt>Født</dt>
				<dd>{{?it.born}}{{=it.born}}{{??}}Mangler fødselsdato{{?}}</dd>
				<dt>Registrert</dt>
				<dd>{{?it.registrationDate}}{{=it.registrationDate}}{{??}}Mangler registreringsdato</dd>{{?}}
				<dt>Kjønn</dt>
				<dd>{{=it.gender}}</dd>
				<dt>ID-nummer</dt>
				<dd>{{~it.details.ids:id:i}}{{=id.type}}: {{=id.value}}<br/>{{~}}</dd>
				<dt>Postnummer</dt>
				<dd>{{=it.postalCode}}</dd>
				
				{{?it.details.ancestry.father}}
					<dt>Far</dt>
					<dd>{{=it.details.ancestry.father.name}} {{?it.details.ancestry.father.breed}}({{=it.details.ancestry.father.breed.name}}){{?}}</dd>
				{{?}}
				
				{{?it.details.ancestry.mother}}
					<dt>Mor</dt>
					<dd>{{=it.details.ancestry.mother.name}} {{?it.details.ancestry.father.breed}}({{=it.details.ancestry.mother.breed.name}}){{?}}</dd>
				{{?}}

				{{?it.details.offspring}}
					<dt>Avkom</dt>
					<dd>
						<dl>
							{{~it.details.offspring:offspring:i}}
								<dt>Født: {{=offspring.born}} ({{=offspring.count}})</dt>
								{{~offspring.puppies:pup:o}}<dd>{{=pup.name}}</dd>{{~}}
							{{~}}
						</dl>
					</dd>
				{{?}}

				{{?it.details.showResults}}
					<dt>Resultater fra utstillinger</dt>
					<dd>
						<dl>
							{{~it.details.showResults:show:j}}
								<dt>{{=show.location}}, {{=show.date}}</dt>
								<dt>{{=show.organizer}}, {{=show.judge}} ({{=show.showId}})</dt>
								<dd>{{=show.result}} ({{=show.catalogNumber}})</dd>
							{{~}}
						</dl>
					</dd>
				{{?}}

				{{?it.details.breeders}}
					<dt>Oppdretter</dt>
					{{~it.details.breeders:breeder:i}}
						<dd>{{=breeder.name}}</dd>
					{{~}}
				{{?}}

			</dl>
		</script> 
		<script data-main="js/main" src="js/lib/require.js"></script>
	</body>
</html>
